require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([3],{666:function(e,t,s){"use strict";var n=a(s(1)),i=a(s(667));function a(e){return e&&e.__esModule?e:{default:e}}Page((0,n.default)(i.default))},667:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(669),i=s.n(n),a=s(678);var o=function(e){s(668)},c=s(0)(i.a,a.a,o,null,null);t.default=c.exports},668:function(e,t){},669:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(s(670)),i=a(s(674));function a(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{name:"xcecd@qq.com",style:{pageHeight:0,contentViewHeight:0,footViewHeight:90,mitemHeight:0},scrollTop:0,messages:[{user:"home",type:"head",content:"你好!"}]}},components:{chatInput:n.default,messageShow:i.default},onLoad:function(){var t=e.getSystemInfoSync();this.style.pageHeight=t.windowHeight,this.style.contentViewHeight=t.windowHeight-e.getSystemInfoSync().screenWidth/750*100},methods:{getInputMessage:function(e){this.addMessage("customer",e.content,!1),this.toRobot(e.content)},addMessage:function(e,t,s,n){this.messages.push({user:e,content:t,hasSub:s,subcontent:n})},scrollToBottom:function(){var t=this,s=e.createSelectorQuery();s.selectAll(".m-item").boundingClientRect(),s.select("#scrollview").boundingClientRect(),s.exec(function(e){t.style.mitemHeight=0,e[0].forEach(function(e){t.style.mitemHeight=t.style.mitemHeight+e.height+20}),t.style.mitemHeight>t.style.contentViewHeight&&(t.scrollTop=t.style.mitemHeight-t.style.contentViewHeight)})},toRobot:function(t){var s=this;e.request({url:"http://www.tuling123.com/openapi/api",data:{key:"acfbca724ea1b5db96d2eef88ce677dc",info:t,userid:"uni-test"},success:function(e){console.log("s",e),s.addMessage("home",e.data.text,!1),s.scrollToBottom(),console.log("request success:"+e.data.text)},fail:function(t){console.log("request fail",t),e.showModal({content:t.errMsg,showCancel:!1})}})}}}}).call(t,s(2).default)},670:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(672),i=s.n(n),a=s(673);var o=function(e){s(671)},c=s(0)(i.a,a.a,o,null,null);t.default=c.exports},671:function(e,t){},672:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"chat-input",data:function(){return{inputValue:""}},methods:{startRecognize:function(){var e={},t=this;e.engine="iFly",t.inputValue="",plus.speech.startRecognize(e,function(e){console.log(e),t.inputValue+=e},function(e){console.log("语音识别失败："+e.message)})},sendMessge:function(){""==this.inputValue.trim()?this.inputValue="":(this.$emit("send-message",{type:"text",content:this.inputValue}),this.inputValue="")}}}},673:function(e,t,s){"use strict";var n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("view",{staticClass:"footer"},[s("view",{staticClass:"footer-left"},[s("view",{staticClass:"uni-icon uni-icon-mic",attrs:{eventid:"sL9-0"},on:{tap:e.startRecognize}})]),s("view",{staticClass:"footer-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"input-text",attrs:{type:"text",eventid:"Q7y-1"},domProps:{value:e.inputValue},on:{input:function(t){t.target.composing||(e.inputValue=t.target.value)}}})]),s("view",{staticClass:"footer-right",attrs:{eventid:"oQX-2"},on:{tap:e.sendMessge}},[s("view",{attrs:{id:"msg-type"}},[e._v("发送")])])])},staticRenderFns:[]};t.a=n},674:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(676),i=s.n(n),a=s(677);var o=function(e){s(675)},c=s(0)(i.a,a.a,o,null,null);t.default=c.exports},675:function(e,t){},676:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["message","id"]}},677:function(e,t,s){"use strict";var n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("view",{staticClass:"m-item",attrs:{id:"message"+e.id}},[s("view",{staticClass:"m-left"},["home"==e.message.user?s("image",{staticClass:"head_icon",attrs:{src:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/app/homeHL.png"}}):e._e()]),s("view",{staticClass:"m-content"},[s("view",{staticClass:"m-content-head",class:{"m-content-head-right":"customer"==e.message.user}},[s("view",{class:"m-content-head-"+e.message.user},[e._v(e._s(e.message.content)+" ")])])]),s("view",{staticClass:"m-right"},["customer"==e.message.user?s("image",{staticClass:"head_icon",attrs:{src:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/app/customerHL.png"}}):e._e()])])},staticRenderFns:[]};t.a=n},678:function(e,t,s){"use strict";var n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("view",{staticClass:"uni-column"},[s("view",{staticClass:"content",style:{height:e.style.contentViewHeight+"px"},attrs:{id:"content"}},[s("scroll-view",{style:{height:e.style.contentViewHeight+"px"},attrs:{id:"scrollview","scroll-y":"true","scroll-with-animation":!0,"scroll-top":e.scrollTop}},[s("page-foot",{attrs:{name:e.name,mpcomid:"NhE-0"}}),e._l(e.messages,function(e,t){return s("message-show",{key:t,attrs:{message:e,id:t,mpcomid:"PGE-1-"+t}})}),s("view",{attrs:{id:"bottom"}})],2)],1),s("view",{staticClass:"foot"},[s("chat-input",{attrs:{eventid:"HeE-0",mpcomid:"bry-2"},on:{"send-message":e.getInputMessage,focus:e.inputGetFocus}})],1)])},staticRenderFns:[]};t.a=n}},[666]);